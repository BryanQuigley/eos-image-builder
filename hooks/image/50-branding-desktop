# Adds the configuration file and assets to customize the desktop.
#
# The file will live in /etc/gnome-shell/branding.conf, and any related
# resources (e.g. logo) under /etc/eos-branding/assets.

if [ -z "${EIB_IMAGE_BRANDING_DESKTOP_CONFIG}" ]; then
    exit 0
fi

CONFIG_DIR="${OSTREE_DEPLOYMENT}"/etc/gnome-shell
ASSETS_DIR="${OSTREE_DEPLOYMENT}"/etc/eos-branding/assets

mkdir -p "${CONFIG_DIR}"
cp "${EIB_IMAGE_BRANDING_DESKTOP_CONFIG}" "${CONFIG_DIR}"/

# The logo is optional
if [ -n "${EIB_IMAGE_BRANDING_DESKTOP_LOGO}" ]; then
    mkdir -p "${ASSETS_DIR}"
    cp "${EIB_IMAGE_BRANDING_DESKTOP_LOGO}" "${ASSETS_DIR}"/
fi
