# Adds the configuration file and assets to customize the welcome page of the FBE.
#
# The file will live in /etc/eos-branding/gnome-initial-setup/pages.conf,
# and any related resources (e.g. logo) under /etc/eos-branding/assets.

if [ -z "${EIB_IMAGE_BRANDING_FBE_CONFIG}" ]; then
    exit 0
fi

CONFIG_DIR="${OSTREE_DEPLOYMENT}"/etc/eos-branding

mkdir -p "${CONFIG_DIR}"/gnome-initial-setup
cp "${EIB_IMAGE_BRANDING_FBE_CONFIG}" "${CONFIG_DIR}"/gnome-initial-setup/

# The logo is optional
if [ -n "${EIB_IMAGE_BRANDING_FBE_LOGO}" ]; then
    mkdir -p "${CONFIG_DIR}"/assets
    cp "${EIB_IMAGE_BRANDING_FBE_LOGO}" "${CONFIG_DIR}"/assets/
fi
